---
title: "Inventory of items"
author: "christiane morecock"
date: "2023-02-17"
output: html_document
editor_options: 
  markdown: 
    wrap: 72
---

```{r setup, include=FALSE, echo=FALSE,warning=FALSE, error=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library("officer")
install.packages("languageserver")
```

## Main Directory

-   Important scripts TODO: Order the important scripts \###
    analysis_journal.docx Word Document with a journal of how I learned
    it when I learned it in the order I learned it. This may be the most
    helpful document to read, though incredibly informal. A sample of
    the text is displayed below. KEEP TODO: Clean this document up and
    save as a README.md with more clear directions of what to do for
    reader.

```{r doc1}

sample_data <- read_docx("./analysis_journal.docx")

content <- docx_summary(sample_data)
paragraphs <- content %>% filter(content_type == "paragraph")
paragraphs$text %>% head()

```

-   background.docx
    -   Word Document of a short summary for the process that is used
        for the most updated result. This is not very in detail, and may
        be confusing to the reader. A sample of the text is displayed
        below. KEEP

```{r doc2}

sample_data <- read_docx("./background.docx")

content <- docx_summary(sample_data)
paragraphs <- content %>% filter(content_type == "paragraph")
paragraphs$text %>% head()

```

-   BoxPlot_log2_NormalizedCount_prelim.png
    -   This is a png file that didn't generate properly, but it looks
        like It is being generated by the deg analysis reports.
    -   TODO: regenerate it.
-   calculate_threshold.R
    -   Script used to calculate thresholds.
    -   TODO: Should be used to remove neg_C.
-   clean_ehr_data.R
    -   Writes "./clean_data/ehr_full.csv" Which is clean and complete
        clinical data from raw data received from Lathika KEEP
-   demo_tab.png A png of a demographics table. Generated by
    "generate_table.Rmd". Supposed to print to clean_data directory.
    This may be deleted.
    -   TODO: Move to clean_data/
-   DESeq2_DEGs_Avs.B_prelim.csv/.txt
    -   Cannot find how these were generated.
    -   TODO: DELETE possibly
-   generate_table.Rmd
    -   R markdown file generating the demo_tab pdf, png and HTML
        report. KEEP \### Heatmap_log2_NormalizedCount_092022.png
        generated by deg_analysis.R script under the threshold files
        KEEP TODO: put in a more organized location
-   housekeeping_all_samples_bg-mean1SD_0922_nf_format.txt
    -   KEEP
    -   TODO: Needs further review
-   housekeeping_genes.csv KEEP
    -   TODO: Needs further review
-   MAPlot_Avs.B_prelim\_.jpg
    -   This looks like some sort of dispersion chart. Will KEEP
    -   TODO: Needs further review
-   miRNA_target_filter_expobs.xls
    -   I believe these files are exported from IPA software. KEEP
    -   TODO: Needs further review
-   mohanraj_tina.bachas_nanostring_report_092022
    -   KEEP
    -   TODO: Needs further review
-   mohanraj_tina.bachas_nanostring_report_092022.Rmd
    -   This is the current report with Threshold 1 being used. Current
        version has WGCA, which needs to be changed. 12/2022 KEEP
    -   TODO: It needs to be moved carefully to the threshold1 folder,
        but cannot be moved yet due to relative pathing, cross-reference
        with the threshold1 report.
-   normfinder_format.txt
    -   Text file written by NormFinder_analysis in threshold 1 and
        threshold 2 folders. NormFinder is used to find housekeeping
        genes. KEEP
-   PCAplot_log2_NormalizedCount_prelim.png
    -   KEEP
    -   TODO: Needs further review
-   prelim_SampleCorrelation_Heatmap.jpeg
    -   KEEP
    -   TODO: Needs further eview
-   raw_data_transfigurations.RData
    -   Generated by calculate_threshold.R, used in several other
        scripts. It's many datapoints. All of this data is RAW data,
        before normalized with nSolver. This is not thresholded data.
        -   df - metadata file
        -   raw_data - clean raw_data, columns are samples, rows are
            miRNAs
        -   log2_raw - log2 transformed raw data, columns are samples,
            rows are miRNAs
        -   trans_dat - raw data, columns are miRNAs, rows are samples
        -   log2_trans_dat- log2 transformed raw data, columns are
            miRNAs, rows are samples raw_data_long - row is each gene in
            each sample. Single column for raw counts.
        -   log_dat_long - row is each gene in each sample. Single
            column for log2 transformed raw counts.
        -   means_vec - means of the means of the negative controls.
-   raw_sample_metadata.csv
    -   A csv file with metadata for each sample created by
        deg_analysis.R KEEP
-   SampleCorrelation_Heatmap.jpeg
    -   KEEP
    -   This may be created at the instruction of Dr. Liu, but it's from
        September. Cannot find where it comes from.
    -   TODO: Needs further review
-   test_corr_plot.R
    -   This may be test code. It takes the Weighted Gene Correlation
        Network Analysis (WGCNA) data ( generated from
        "threshold1_22\correlation\_tests.R"). Dr. Liu said in a meeting
        December 2022 that the WCGNA will lose power for this analysis
        because there are so few genes. We are not looking for a block
        of losely correlated miRNAs, we are looking for one or two
        heavily correlated miRNAs. I may still be able to use this code
        WITHOUT the WGCNA data KEEP

    -   TODO: Needs further review

### **Directory**: clean_data

Directory filled with clean clinical data it looks like. TODO: Add in
the transformed .RDatas here?

-   clean_data\demo\_tab.pdf
    -   Generated by "generate_table.Rmd"
-   clean_data\demographics\_aggregate.csv
    -   Generated by "generate_table.Rmd"
-   clean_data\ehr\_full.csv
    -   Generated by "clean_ehr_data.R"

### **Directory**: normfinder_format

-   normfinder\archive\NormOldStab5.R
    -   Old version of normfinder function. Two versions earlier than
        the version in use.
-   normfinder\archive\NormFinder.R
    -   Old version of normfinder function. Unsure which version.
-   normfinder\NormFinder\_R.R
    -   \*NormFinder Function that needs to be sourced for the script
        "Normfinder_Analysis.R" scripts.
-   normfinder\NormFinder\_analysis.R
    -   \*Amy Olex script that uses NormFinder to identify housekeeping
        genes.
-   normfinder\all\_samples_bg-mean1SD_0922.txt
    -   This file has 828 probes, and 47 samples, and a few annotation
        columns. Contains CV% values from the candidate genes. This file
        must be output from nSolver? This is used in the
        "NormFinder_analysis.R" script. KEEP
-   normfinder\all\_samples_bg-mean1SD_0922_nf_format.txt
    -   This file has 829 probes, and 47 samples. These are likely
        nSolver normalized. Unsure where this file came from. Maybe
        manually saved from nSolver? TODO: move to archive? or delete?
-   normfinder\housekeeping\_all_samples_bg-mean1SD_0922_nf_format.txt
    -   This file has 94 probes, and 47 samples. These are likely
        nSolver normalized. This file is created AND used in the
        "NormFinder_analysis.R" script. KEEP

```{r comparing_tables}

a <- read.table("./normfinder/housekeeping_all_samples_bg-mean1SD_0922_nf_format.txt", header = TRUE)
b <- read.table("./normfinder/all_samples_bg-mean1SD_0922_nf_format.txt", header = TRUE)
c <- read_tsv("./normfinder/all_samples_bg-mean1SD_0922.txt", skip = 0)[-1,]
```

-   normfinder\NormFinder\_OrderedResults_bg-mean1SD_2022-09-27.csv
    -   Output of NormFinder function. Used to identfiy housekeeping
        genes.
-   normfinder\NormFinder\_PairOfGenesResultsbg-mean1SD_2022-09-27.csv
    -   Output of NormFinder function. Not Used.
-   normfinder\NormFinder\_UnOrderedResults_bg-mean1SD_2022-09-27.csv
    -   Output of NormFinder function. Not Used.
-   normfinder\housekeeping\_genes.csv
    -   Final output of "normfinder\NormFinder\_analysis.R" - genes
        selected (by hand) in nSolver. I think this one may be
        corrupt... and could be reproduced.
    -   TODO: Check report, for which genes were actually used.

### **Directory**: nsolver_output_all_samples_normalized

This whole folder is confusing. TODO: move to archive folder.

### **Directory**: nSolver_outputs

-   nSolver_outputs\background\_subtraction\mean\_1sd.csv/txt
    -   Output of nSolver with the background substraction as mean +1sd
        csv/txt
-   nSolver_outputs\background\_threshold\threshold\_20.csv
    -   Output of nSolver with thresholding at 20
-   nSolver_outputs\background\_threshold\threshold\_22_1.csv
    -   Output of nSolver with thresholding at mean +1sd = 22
-   nSolver_outputs\background\_threshold\threshold\_28_2.csv
    -   Output of nSolver with thresholding at mean +2sd = 22
-   nSolver_outputs\background\_threshold\threshold\_33_3.csv
    -   Output of nSolver with thresholding at mean +3sd = 22
-   nSolver_outputs\background\_threshold\threshold\_39_4.csv
    -   Output of nSolver with thresholding at mean +4sd = 22

### **Directory**: raw_reports

-   raw_reports\L.Mohanraj_QC Report_20220824.pdf
    -   A QC report about the raw data from the nanostring correlated
-   raw_reports\NS\_H_miR_v3b.rlf
    -   A report layout file generated by nanostring core. Not used by
        analyst.

### **Directory**: threshold1_22

-   threshold1_22\wgcna\
    -   When wgcna was demonstrated to Jinze, she disagreed with the
        method in December 2022. This folder is an archive of that work.
    -   threshold1_22\figures\
    -   threshold1_22\figures\a\_v_b\_heatmap.png
    -   threshold1_22\figures\corr\_plot.png
    -   threshold1_22\figures\correlation\_miRNA.pdf
    -   threshold1_22\figures\mRNAtargets\_qval0.05_exp_observed.jpg/.pdf
    -   threshold1_22\figures\MAP\_mRNAtargets_qval0.05_exp_observed.jpg
    -   threshold1_22\figures\pca\_comp.pdf
-   threshold1_22 ipa_pathways.csv/.tsv
    -   manual output of IPA for dr. Mohanraj to look through
    -   Can probably be deleted... wait though
-   threshold1_22 mirabel_sig_values.tsv/.txt
    -   mirabel is a a package that I intended to work with. Don't think
        I moved forward with it after some research.
-   threshold1_22 mirabel_values.tsv/.txt
    -   mirabel is a a package that I intended to work with. Don't think
        I moved forward with it after some research.
-   threshold1_22\deg\_analysis_1022.R
    -   script written by Amy Olex, but modified by Christiane Morecock.
        DEG analysis of Av.b
    -   Contains script for other DEG questions that will not be used.
    -   creates data for log transformed normalized data.
    -   scratch code for figures
    -   TODO: needs to be cleaned
-   threshold1_22\demo\_pathway.jpg
    -   jpg file generated from IPA to demonstrate the pathway features
-   threshold1_22\description of figures.docx
    -   word document describing every figure in the figures/
        subdirectory
-   threshold1_22\DESeq2\_DEGs\_\_Avs.B_prelim.csv
    -   The results of the differential expression
    -   This one has rownames saved
-   threshold1_22\DESeq2_DEGs_anc_engraftment_day_prelim.csv/.txt
    -   This will likely be deleted for new analysis
-   threshold1_22\DESeq2\_DEGs_anc_engraftmentengraftment_prelim.csv/.txt
    -   This will likely be deleted for new analysis
-   threshold1_22\DESeq2\_DEGs_Avs.B_prelim.csv
    -   The results of the differential expression
    -   This one FORGOT to save rownames. 
-   threshold1_22\DESeq2\_DEGs_engraftmentengraftment_prelim.csv/.txt
    -   This will likely be deleted for new analysis
-   threshold1_22\DESeq2\_DEGs_plt_engraftment_day_prelim.csv/.txt
    -   This will likely be deleted for new analysis
-   threshold1_22\engraftment.RData
    -   I believe this will need to be deleted
-   threshold1_22\figure\_generation.R
    -   script generates side by side PCA (BEFORE AND AFTER NORMALIZATION)
-   threshold1_22\housekeeping\_genes.csv
    -   Housekeeping genes generated with a the threshold indicated 
-   threshold1_22\miRNA\_target_filter_AvB_expobs_qval0.05.xls
    -   manual exports, and filters from IPA for Lathika
-   threshold1_22\miRNA\_target_filter_AvB_highpred_expobs.txt
    -   manual exports, and filters from IPA for Lathika
-   threshold1_22\miRNA\_target_filter_AvB.xls
    -   manual exports, and filters from IPA for Lathika
-   threshold1_22\miRNA\_target_filter_highpred_expobs.txt
    -   manual exports, and filters from IPA for Lathika
-   threshold1_22\mohanraj\_tina.bachas_nanostring_report_092022.Rmd
    -   an older version of the report. To be replaced by the one in the main directory when relative paths are corrected 
-   threshold1_22\normalized\_data_configurations.RData
    -   saved variables of the normalized data
-   threshold1_22\NormFinder\_analysis.R
    -   Normfinder script to calculate housekeeping genes for the the threshold
-   threshold1_22\NormFinder\_OrderedResults_threshold1_222022-10-10.csv
    -   Output of Normfinder
-   threshold1_22\NormFinder\_PairOfGenesResults_threshold1_222022-10-10.csv
    -   Output of Normfinder
-   threshold1_22\NormFinder\_UnOrderedResults_threshold1_222022-10-10.csv
    -   Output of Normfinder
-   threshold1_22\threshold1\_22_normalized.csv
    -   saved normalized data, output from nSolver
